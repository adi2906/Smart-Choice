<% layout("layouts/boilerplate")%>

<div class="row">
    <h1 class="text-center">Edit Restaurant</h1>
    <div class="col-6 offset-3">
        <form action="/restaurants/<%=restaurant._id%>/?_method=PUT" method="POST" novalidate class="validated-form" enctype="multipart/form-data">
            <div class="mb-2">
                <label class="form-label" for="title">Title</label>
                <input class="form-control" type="text" id="title" name="restaurant[title]" value="<%=restaurant.title%>" required>
                <div class="valid-feedback">
                    Looks Good!
                </div>
            </div>
            <div class="mb-2">
                <label class="form-label" for="location">Location</label>
                <input class="form-control" type="text" id="location" name="restaurant[location]" value="<%=restaurant.location%>" required>
                <div class="valid-feedback">
                    Looks Good!
                </div>
            </div>
            <div class="mb-2">
                <label class="form-label" for="">Price</label>
                <div class="d-flex justify-content-around">
                    <!-- verific check -->
                    <!-- todo: seeds prices! random $ to $$$ -->
                    <% let checked1 = (restaurant.price === "$") ? "checked" : "" %>
                    <% let checked2 = (restaurant.price === "$$") ? "checked" : "" %>
                    <% let checked3 = (restaurant.price === "$$$") ? "checked" : "" %>
                    <div class="custom-control custom-radio">
                        <input type="radio" id="price1" class="custom-control-input" name="restaurant[price]" value="$" <%= checked1 %> >
                        <label class="custom-control-label" for="price1"><b>$</b> <small class="text-muted">Cheap Prices</small></label>
                    </div>
                    <div class="custom-control custom-radio">
                        <input type="radio" id="price2" class="custom-control-input" name="restaurant[price]" value="$$" <%= checked2 %>>
                        <label class="custom-control-label" for="price2"><b>$ $</b> <small class="text-muted">Medium Prices</small></label>
                    </div>
                    <div class="custom-control custom-radio">
                        <input type="radio" id="price3" class="custom-control-input" name="restaurant[price]" value="$$$" <%= checked3 %>>
                        <label class="custom-control-label" for="price3"><b>$ $ $</b> <small class="text-muted">High Prices</small></label>
                    </div>
                  </div>
            </div>
            <!-- DESCRIPTION -->
            <div class="mb-2">
                <label class="form-label" for="description">Description</label>
                <textarea class="form-control" type="text" id="description" name="restaurant[description]" required><%=restaurant.description%></textarea>
                <div class="valid-feedback">
                    Looks Good!
                </div>
            </div>
               <!-- IMAGE -->
            <div class="form-file custom-file mb-3">
                <label for="images" class="form-label">Choose images</label>
                <input class="form-control custom-file-label" type="file" id="images" name="image" multiple>
            </div>
            <!-- IMAGE : delete -->
            <div class="mb-3">
                <% restaurant.images.forEach(function(img, i) { %> 
                    <img src="<%= img.representation %> " class="img-fluid img-thumbnail" alt="">
                    <div class="form-check-inline">
                        <input type="checkbox" id="image-<%= i %>" name="deleteImages[]" value="<%= img.filename %>">
                    </div>
                    <label for="image-<%= i %>">Delete</label>
                <% })  %> 
            </div>
            <div class="mb-3">
                <button class="btn btn-info ">Update Restaurant</button>
            </div>
        </form>
        <a href="/restaurants/<%=restaurant._id%> ">Back to the restaurant</a>
        
    </div>
</div>